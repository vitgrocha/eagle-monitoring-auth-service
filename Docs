# ğŸ” MSAuthentication - DocumentaÃ§Ã£o TÃ©cnica

MicroserviÃ§o responsÃ¡vel pela **autenticaÃ§Ã£o** de usuÃ¡rios e emissÃ£o de tokens JWT.  
Desenvolvido com ASP.NET Core, seguindo arquitetura RESTful e com suporte a roles de acesso.

---

## ğŸ“Œ VisÃ£o Geral

O `MSAuthentication` atua como ponto central de autenticaÃ§Ã£o no sistema, lidando com:

- Registro de usuÃ¡rios
- Login com validaÃ§Ã£o de senha (bcrypt)
- GeraÃ§Ã£o e validaÃ§Ã£o de tokens JWT
- Refresh tokens (com controle de seguranÃ§a)
- Logout com revogaÃ§Ã£o de token via cache
- AlteraÃ§Ã£o de senha
- RecuperaÃ§Ã£o de conta
- Controle de perfis (roles) com enum `UserRole`

---

## âš™ï¸ Tecnologias Utilizadas

- ASP.NET Core 7.0+
- Entity Framework Core
- JWT Bearer Authentication
- BCrypt.Net
- AutoMapper
- Swagger (Swashbuckle)
- MySQL / SQL Server
- Middleware customizado
- CORS configurado

---

## ğŸ§  Estrutura de Pastas

MSAuthentication/
â”œâ”€â”€ Controllers/
â”œâ”€â”€ Models/
â”œâ”€â”€ DTOs/
â”œâ”€â”€ Services/
â”œâ”€â”€ Middleware/
â”œâ”€â”€ Data/
â”œâ”€â”€ Config/
â”œâ”€â”€ Migrations/
â””â”€â”€ README.md

yaml
Copiar
Editar

---

## ğŸ” Roles e Perfis

Enum `UserRole`:
public enum UserRole
{
    Admin,
    AdminTerceirizado,
    Portaria,
    Morador,
    Visitante
}

##ğŸ”„ Fluxos implementados

###âœ… Registro
POST /api/auth/register
Cria novo usuÃ¡rio com senha criptografada.

###ğŸ”‘ Login
POST /api/auth/login
Gera JWT e refresh token.

###ğŸ”„ AtualizaÃ§Ã£o de Senha
POST /api/auth/change-password

###ğŸ” RecuperaÃ§Ã£o de Conta
POST /api/auth/forgot-password

###ğŸšª Logout
POST /api/auth/logout
Invalida o token via cache.

###ğŸ§ª ProteÃ§Ã£o com Middleware
Middleware AuthenticationMiddleware verifica tokens e permissÃµes antes da execuÃ§Ã£o de cada endpoint protegido.

###ğŸ”„ Em desenvolvimento
Middleware de autorizaÃ§Ã£o por roles

IntegraÃ§Ã£o com MSAuthorization

IntegraÃ§Ã£o com MSResidents

Front-end para gerenciamento de usuÃ¡rios

ğŸ‘©â€ğŸ’» Desenvolvido por
VitÃ³ria Gabriella
Projeto: **Eagle Monitoring**
InÃ­cio: MarÃ§o/2024
